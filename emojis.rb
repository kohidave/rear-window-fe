require 'json'
require 'active_support/all'

EMOJI_DATA = JSON.load File.open("./emojis.json")

class Emojify
    def self.ForName(name) 
        name = name.downcase
        emoji = EMOJI_DATA[name] || EMOJI_DATA[name.singularize] || EMOJI_DATA[name.pluralize] || EMOJI_DATA[name.parameterize.underscore]
        if emoji != nil
            return emoji['char']
        end

        EMOJI_DATA.each do |emoji_name, val|
            if val["keywords"].include?(name) || val["keywords"].include?(name.singularize) || val["keywords"].include?(name.pluralize) 
                return val['char']
            end
        end

        return nil
    end

    def self.RandomEmojis(num)
        truly_random = EMOJI_DATA.values.filter{|val| !["flags", "symbols"].include? val["category"]}.sample(5).map {|val| val['char']}
        common = ['âŒ›','âŒ¨','â°','â˜','â˜•','â™€','âš½','âš¾','â›°','â›³','â›´','â›º','âœ‚','âœˆ','âœŠ','ğŸŒ','ğŸŒ‚','ğŸŒƒ','ğŸŒ†','ğŸŒ‰','ğŸŒŠ','ğŸŒ”','ğŸŒ±','ğŸŒ³','ğŸŒ´','ğŸŒ¹','ğŸŒº','ğŸŒ»','ğŸŒ¼','ğŸŒ¿','ğŸ„','ğŸ…','ğŸŠ','ğŸŒ','ğŸ','ğŸ•','ğŸ','ğŸ','ğŸ¡','ğŸ¨','ğŸª','ğŸ¯','ğŸ°','ğŸ±','ğŸ³','ğŸµ','ğŸ·','ğŸ¸','ğŸº','ğŸ½','ğŸ¾','ğŸ','ğŸ','ğŸ’','ğŸ–','ğŸ¦','ğŸ¨','ğŸ²','ğŸ¸','ğŸ¹','ğŸ¾','ğŸ¿','ğŸƒ','ğŸˆ','ğŸŠ','ğŸ','ğŸ•','ğŸ—','ğŸ˜','ğŸ™','ğŸ ','ğŸ¢','ğŸ£','ğŸ«','ğŸ­','ğŸµ','ğŸº','ğŸ”','ğŸ˜','ğŸ','ğŸ¢','ğŸ¦','ğŸ¨','ğŸ¯','ğŸ±','ğŸ¶','ğŸ‘„','ğŸ‘’','ğŸ‘“','ğŸ‘”','ğŸ‘•','ğŸ‘–','ğŸ‘—','ğŸ‘›','ğŸ‘œ','ğŸ‘','ğŸ‘Ÿ','ğŸ‘¤','ğŸ‘¥','ğŸ‘§','ğŸ‘¨','ğŸ‘©','ğŸ‘«','ğŸ‘°','ğŸ‘±','ğŸ‘¶','ğŸ’„','ğŸ’…','ğŸ’†','ğŸ’ˆ','ğŸ’’','ğŸ’ ','ğŸ’¡','ğŸ’§','ğŸ’º','ğŸ’»','ğŸ’¼','ğŸ“','ğŸ“•','ğŸ“š','ğŸ“±','ğŸ“¶','ğŸ“·','ğŸ”£','ğŸ”¥','ğŸ”ª','ğŸ”«','ğŸ”­','ğŸ”¼','ğŸ•´','ğŸ–¨','ğŸ—¼','ğŸ˜€','ğŸ˜„','ğŸ˜','ğŸ˜º','ğŸš€','ğŸš‹','ğŸšŒ','ğŸš•','ğŸš—','ğŸš˜','ğŸšš','ğŸšª','ğŸš²','ğŸš½','ğŸš¿','ğŸ›€','ğŸ›','ğŸ›‹','ğŸ›','ğŸ›£','ğŸ›©','ğŸ›«','ğŸ¤–','ğŸ¤ ','ğŸ¤¢','ğŸ¤£','ğŸ¤²','ğŸ¤³','ğŸ¥„','ğŸ¥','ğŸ¥•','ğŸ¥š','ğŸ¥›','ğŸ¥¦','ğŸ¥¾','ğŸ¦','ğŸ¦','ğŸ¦‘','ğŸ¦’','ğŸ¦“','ğŸ¦','ğŸ§‘','ğŸ§’','ğŸ§—','ğŸ§¢','ğŸ§¤','ğŸ§¥','ğŸ§±','ğŸ§³','ğŸ§µ','ğŸ§¶','ğŸ§¸'].sample(num-5)
        Set.new(truly_random) | Set.new(common)
    end
end